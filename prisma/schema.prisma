// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Member {
  rollNo            String       @id @map("memberId") @db.Char(13)
  name              String       @db.VarChar(50)
  email             String       @unique
  phone             String       @db.Char(10)
  username          String       @unique @db.VarChar(50)
  gradYear          Int          @db.SmallInt
  quantaJoiningYear Int          @db.SmallInt
  socialLinks       SocialLink[]
  profilePic        String       @db.VarChar(2083)
  designation       Designation
  PostHolder        PostHolder?

  @@unique([rollNo, gradYear])
}

model PostHolder {
  rollNo   String @unique @map("memberId") @db.Char(13)
  gradYear Int    @db.SmallInt
  post     Post
  member   Member @relation(fields: [rollNo, gradYear], references: [rollNo, gradYear])

  @@unique([gradYear, post])
  @@unique([rollNo, gradYear])
}

enum Post {
  GENERAL_SECRETARY
  VICE_PRESIDENT
  CTC
  DESIGN_HEAD
  MANAGEMENT_HEAD
  TECHNICAL_HEAD
  FINANCE_HEAD
  WEB_HEAD
}

enum Designation {
  TECHNICAL_TEAM_MEMBER
  DESIGN_TEAM_MEMBER
  WEB_TEAM_MEMBER
}

// store only the usernames (except in personalWebsite and blog). create the full links on the frontend.
model SocialLink {
  rollNo          String  @unique @map("memberId") @db.Char(13)
  linktree        String? @unique @default("NA") @db.VarChar(50)
  peerlist        String? @unique @default("NA") @db.VarChar(50)
  instagram       String? @unique @default("NA") @db.VarChar(50)
  x               String? @unique @default("NA") @db.VarChar(50)
  linkedin        String  @unique @db.VarChar(50)
  github          String? @unique @default("NA") @db.VarChar(50)
  dribble         String? @unique @default("NA") @db.VarChar(50)
  behance         String? @unique @default("NA") @db.VarChar(50)
  personalWebsite String? @unique @default("NA") @db.VarChar(100)
  blog            String? @unique @default("NA") @db.VarChar(100)
  member          Member  @relation(fields: [rollNo], references: [rollNo])
}
